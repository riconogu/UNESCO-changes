<!DOCTYPE html>


<meta charset="utf-8">

<!-- Load d3.js & color scale-->
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>UNESCO: Changes through the Ages</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand js-scroll-trigger" href="#page-top">UNESCO Changes</a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#about">History</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#timeline">Timeline</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#projects">Projects</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#team">Team</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead">
            <div class="container d-flex h-100 align-items-center">
                <div class="mx-auto text-center">
                    <h1 class="mx-auto my-0 text-uppercase">UNESCO: Changes through the Ages</h1>
                    <a class="btn btn-primary js-scroll-trigger" href="#about">Explore</a>
                </div>
            </div>
        </header>

        <!-- About-->
       <section class="about-section text-center" id="about">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">About</h2>
                    <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3>
                </div>
                <ul class="timeline">
                    <li>
                        <div class="timeline-image"><img class="rounded-circle img-fluid" src="dist/assets/img/UNESCO.png" alt="" /></div>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h4>2009-2011</h4>
                                <h4 class="subheading">Our Humble Beginnings</h4>
                            </div>
                            <div class="timeline-body"><p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt ut voluptatum eius sapiente, totam reiciendis temporibus qui quibusdam, recusandae sit vero unde, sed, incidunt et ea quo dolore laudantium consectetur!</p></div>
                        </div>
                    </li>
                    <li class="timeline-inverted">
                        <div class="timeline-image"><img class="rounded-circle img-fluid" src="dist/assets/img/UNESCO.png" alt="" /></div>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h4>March 2011</h4>
                                <h4 class="subheading">An Agency is Born</h4>
                            </div>
                            <div class="timeline-body"><p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt ut voluptatum eius sapiente, totam reiciendis temporibus qui quibusdam, recusandae sit vero unde, sed, incidunt et ea quo dolore laudantium consectetur!</p></div>
                        </div>
                    </li>
                    <li>
                        <div class="timeline-image"><img class="rounded-circle img-fluid" src="dist/assets/img/UNESCO.png" alt="" /></div>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h4>December 2012</h4>
                                <h4 class="subheading">Transition to Full Service</h4>
                            </div>
                            <div class="timeline-body"><p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt ut voluptatum eius sapiente, totam reiciendis temporibus qui quibusdam, recusandae sit vero unde, sed, incidunt et ea quo dolore laudantium consectetur!</p></div>
                        </div>
                    </li>
                    <li class="timeline-inverted">
                        <div class="timeline-image"><img class="rounded-circle img-fluid" src="dist/assets/img/UNESCO.png" alt="" /></div>
                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h4>July 2014</h4>
                                <h4 class="subheading">Phase Two Expansion</h4>
                            </div>
                            <div class="timeline-body"><p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt ut voluptatum eius sapiente, totam reiciendis temporibus qui quibusdam, recusandae sit vero unde, sed, incidunt et ea quo dolore laudantium consectetur!</p></div>
                        </div>
                    </li>
                    <li class="timeline-inverted">
                        <div class="timeline-image">
                            <h4>
                                Be Part
                                <br />
                                Of Our
                                <br />
                                Story!
                            </h4>
                        </div>
                    </li>
                </ul>
            </div>
        </section>
        
        <!-- Timeline-->
        <section class="projects-section bg-light" id="timeline">
            
                   <div class="featured-text text-center text-lg-left">
                            <h4>Sites by Year of Inscription</h4>
                            <p class="text-black-50 mb-0">1995-2014</p>
                        </div>
                    <iframe src='https://cdn.knightlab.com/libs/timeline3/latest/embed/index.html?source=1ghlVYfLfbCA7Y_Ud-frq-jI1XWxfEma4oywE2Ism-W0&font=Georgia-Helvetica&lang=en&initial_zoom=7&height=650' width='100%' height='650' webkitallowfullscreen mozallowfullscreen allowfullscreen frameborder='0'></iframe>
                   </div>
                </div>
        
        <!-- Data-->
        <section class="projects-section bg-light" id="projects">
            <div class="container">
                   <!-- Project One Row-->
                <div class="row justify-content-center no-gutters">
                 		<!-- Create a div where the graph will take place -->
                        <div id="my_dataviz"></div>
                        <script>

                        // set the dimensions and margins of the graph
                        var margin = {top: 20, right: 30, bottom: 0, left: 10},
                            width = 460 - margin.left - margin.right,
                            height = 400 - margin.top - margin.bottom;

                        // append the svg object to the body of the page
                        var svg = d3.select("#my_dataviz")
                          .append("svg")
                            .attr("width", width + margin.left + margin.right)
                            .attr("height", height + margin.top + margin.bottom)
                          .append("g")
                            .attr("transform",
                                  "translate(" + margin.left + "," + margin.top + ")");

                        // Parse the Data
                        d3.csv("https://raw.githubusercontent.com/riconogu/UNESCO-changes/master/dist/assets/freq_table.csv", function(data) {

                          // List of groups = header of the csv files
                          var keys = data.columns.slice(1)

                          // Add X axis
                          var x = d3.scaleLinear()
                            .domain(d3.extent(data, function(d) { return d.Year; }))
                            .range([ 0, width ]);
                          svg.append("g")
                            .attr("transform", "translate(0," + height*0.8 + ")")
                            .call(d3.axisBottom(x).tickSize(-height*.7).tickValues([1995,2000,2005]))
                            .select(".domain").remove()
                          // Customization
                          svg.selectAll(".tick line").attr("stroke", "#b8b8b8")

                          // Add X axis label:
                          svg.append("text")
                              .attr("text-anchor", "end")
                              .attr("x", width)
                              .attr("y", height-30)
                              .text("Time (year)");

                          // Add Y axis
                          var y = d3.scaleLinear()
                            .domain([-50, 50])
                            //.domain([-100000, 100000])
                            .range([ height, 0 ]);

                          // color palette
                          var color = d3.scaleOrdinal()
                            .domain(keys)
                            .range(d3.schemeDark2);

                          //stack the data?
                          var stackedData = d3.stack()
                            .offset(d3.stackOffsetSilhouette)
                            .keys(keys)
                            (data)

                          // create a tooltip
                          var Tooltip = svg
                            .append("text")
                            .attr("x", 0)
                            .attr("y", 0)
                            .style("opacity", 0)
                            .style("font-size", 17)

                          // Three function that change the tooltip when user hover / move / leave a cell
                          var mouseover = function(d) {
                            Tooltip.style("opacity", 1)
                            d3.selectAll(".myArea").style("opacity", .2)
                            d3.select(this)
                              .style("stroke", "black")
                              .style("opacity", 1)
                          }
                          var mousemove = function(d,i) {
                            grp = keys[i]
                            Tooltip.text(grp)
                          }
                          var mouseleave = function(d) {
                            Tooltip.style("opacity", 0)
                            d3.selectAll(".myArea").style("opacity", 1).style("stroke", "none")
                           }

                          // Area generator
                          var area = d3.area()
                            .x(function(d) { return x(d.data.Year); })
                            .y0(function(d) { return y(d[0]); })
                            .y1(function(d) { return y(d[1]); })

                          // Show the areas
                          svg
                            .selectAll("mylayers")
                            .data(stackedData)
                            .enter()
                            .append("path")
                              .attr("class", "myArea")
                              .style("fill", function(d) { return color(d.key); })
                              .attr("d", area)
                              .on("mouseover", mouseover)
                              .on("mousemove", mousemove)
                              .on("mouseleave", mouseleave)

                        })
                        </script>
                </div>
                
                <!-- Endangered Sites-->
                <div class="row justify-content-center no-gutters">
                              <div class="bg-black text-center h-100 project">
                            <div class="d-flex h-100">
                                <div class="project-text w-100 my-auto text-center text-lg-right">
                                <!-- Pie Chart Example -->
                                <div id="piechart"></div>
                                <script>
                                    // set the dimensions and margins of the graph
                                    var width = 200
                                        height = 200
                                        margin = 10

                                    // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
                                    var radius = Math.min(width, height) / 2 - margin

                                    // append the pie_svg object to the div called 'my_dataviz'
                                    var _pie_svg = d3.select("#piechart")
                                      .append("svg")
                                        .attr("width", width)
                                        .attr("height", height)
                                      .append("g")
                                        .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

                                    // Create dummy data
                                    var data = {Cultural: 36, Natural: 17}

                                    // set the color scale
                                    var color = d3.scaleOrdinal()
                                      .domain(["a", "b", "c", "d", "e", "f", "g", "h"])
                                      .range(d3.schemeDark2);

                                    // Compute the position of each group on the pie:
                                    var pie = d3.pie()
                                      .sort(null) // Do not sort group by size
                                      .value(function(d) {return d.value; })
                                    var data_ready = pie(d3.entries(data))

                                    // The arc generator
                                    var arc = d3.arc()
                                      .innerRadius(radius * 0.5)         // This is the size of the donut hole
                                      .outerRadius(radius * 0.8)

                                    // Another arc that won't be drawn. Just for labels positioning
                                    var outerArc = d3.arc()
                                      .innerRadius(radius * 0.9)
                                      .outerRadius(radius * 0.9)

                                    // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
                                    _pie_svg
                                      .selectAll('allSlices')
                                      .data(data_ready)
                                      .enter()
                                      .append('path')
                                      .attr('d', arc)
                                      .attr('fill', function(d){ return(color(d.data.key)) })
                                      .attr("stroke", "white")
                                      .style("stroke-width", "2px")
                                      .style("opacity", 0.7)

                                    // Add the polylines between chart and labels:
                                    _pie_svg
                                      .selectAll('allPolylines')
                                      .data(data_ready)
                                      .enter()
                                      .append('polyline')
                                        .attr("stroke", "white")
                                        .style("fill", "none")
                                        .attr("stroke-width", 1)
                                        .attr('points', function(d) {
                                          var posA = arc.centroid(d) // line insertion in the slice
                                          var posB = outerArc.centroid(d) // line break: we use the other arc generator that has been built only for that
                                          var posC = outerArc.centroid(d); // Label position = almost the same as posB
                                          var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2 // we need the angle to see if the X position will be at the extreme right or extreme left
                                          posC[0] = radius * 0.95 * (midangle < Math.PI ? 1 : -1); // multiply by 1 or -1 to put it on the right or on the left
                                          return [posA, posB, posC]
                                        })

                                    // Add the polylines between chart and labels:
                                    _pie_svg
                                      .selectAll('allLabels')
                                      .data(data_ready)
                                      .enter()
                                      .append('text')
                                        .text( function(d) { console.log(d.data.key) ; return d.data.key } )
                                        .style('fill', 'white')
                                        .attr('transform', function(d) {
                                            var pos = outerArc.centroid(d);
                                            var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2
                                            pos[0] = radius * 0.99 * (midangle < Math.PI ? 1 : -1);
                                            return 'translate(' + pos + ')';
                                        })
                                        .style('text-anchor', function(d) {
                                            var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2
                                            return (midangle < Math.PI ? 'start' : 'end')
                                        })

                                    </script>                                    
                                    <h4 class="text-white">Frequency of Endagered Sites by Criteria</h4>
                                    <p class="mb-0 text-white-50">As of July 2019, there are 53 entries (17 natural, 36 cultural) on the List of World Heritage in Danger. Arranged by the UNESCO regions, 21 of the listed sites are located in the Arab States (of which 6 are located in Syria and 5 in Libya), 16 in Africa (of which 5 are in the Democratic Republic of the Congo), 6 in Latin America and the Caribbean, 6 in Asia and the Pacific, and 4 in Europe and North America. The majority of the endangered natural sites (12) are located in Africa.</p>
                                    <hr class="d-none d-lg-block mb-0 mr-0" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
     
        <!-- Team-->
        <section class="contact-section bg-black" id="team">
            <div class="container">
                <div class="row">
                    <div class="col-md-4 mb-3 mb-md-0">
                        <div class="card py-4 h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-map-marked-alt text-primary mb-2"></i>
                                <h4 class="text-uppercase m-0">Micayla Spiros</h4>
                                <hr class="my-4" />
                                <div class="social d-flex justify-content-center">
                                    <a class="mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                                    <a class="mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                                    <a class="mx-2" href="#!"><i class="fab fa-github"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3 mb-md-0">
                        <div class="card py-4 h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-envelope text-primary mb-2"></i>
                                <h4 class="text-uppercase m-0">Email</h4>
                                <hr class="my-4" />
                                <div class="small text-black-50"><a href="#!">hello@yourdomain.com</a></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3 mb-md-0">
                        <div class="card py-4 h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-mobile-alt text-primary mb-2"></i>
                                <h4 class="text-uppercase m-0">Phone</h4>
                                <hr class="my-4" />
                                <div class="small text-black-50">+1 (555) 902-8832</div>
                            </div>
                        </div>
                    </div>
                </div>
           
            </div>
        </section>
        <!-- Footer-->
        <footer class="footer bg-black small text-center text-white-50"><div class="container">Copyright © UNESCO Changes2020</div></footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
